
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Adonis Protocol 2.0+</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f4f7fa;
      color: #1f2937;
    }
    header {
      background: #0f172a;
      color: white;
      padding: 16px;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
    }
    .container {
      padding: 20px;
      max-width: 900px;
      margin: auto;
    }
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      padding: 20px;
      margin-bottom: 24px;
    }
    h2 {
      margin-top: 0;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: 600;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      margin-top: 20px;
      background: #10b981;
      color: white;
      border: none;
      padding: 10px 16px;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
    }
    canvas {
      max-width: 100%;
      margin-top: 16px;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
    }
  </style>
</head>
<body>
<header>Adonis Protocol 2.0+</header>
<div class="container">
  <div class="card">
    <div class="nav-buttons">
      <button onclick="changeDay(-1)">← Previous</button>
      <div>
        <strong id="dayDisplay"></strong> | <span id="dateDisplay"></span>
      </div>
      <button onclick="changeDay(1)">Next →</button>
    </div>
    <h2>Tracker + Schedule</h2>
    <div><strong>Phase:</strong> <span id="phaseDisplay"></span></div>
    <div id="scheduleBox" style="margin: 10px 0; font-style: italic;"></div>
    <label>Weight (kg)</label><input id="weight">
    <label>Body Fat (%)</label><input id="bodyFat">
    <label>Sleep (hrs)</label><input id="sleep">
    <label>Mood (1–10)</label><input id="mood">
    <label>Energy (1–10)</label><input id="energy">
    <label>Focus (1–10)</label><input id="focus">
    <label>Libido</label><select id="libido"><option>Yes</option><option>No</option></select>
    <label>Cravings</label><select id="cravings"><option>No</option><option>Yes</option></select>
    <label>Smoked/Vaped</label><select id="smoked"><option>No</option><option>Yes</option></select>
    <label>Masturbated</label><select id="masturbated"><option>No</option><option>Yes</option></select>
    <label>Followed Plan</label><select id="compliance"><option>Yes</option><option>No</option></select>
    <label>Notes</label><textarea id="notes" rows="3"></textarea>
    <button onclick="saveEntry()">Save Entry</button>
  </div>

  <div class="card">
    <h2>Analytics</h2>
    <canvas id="weightChart"></canvas>
  </div>
</div>

<script>
let selectedDate = new Date();
const logs = JSON.parse(localStorage.getItem("adonisLogs") || "[]");

function formatDate(d) {
  return d.toISOString().split('T')[0];
}

function updateHeader() {
  const dateStr = formatDate(selectedDate);
  const weekday = selectedDate.toLocaleDateString('en-GB', { weekday: 'long' });
  document.getElementById("dateDisplay").textContent = dateStr;
  document.getElementById("dayDisplay").textContent = weekday;

  const startDate = new Date(localStorage.getItem("adonisStart") || formatDate(new Date()));
  localStorage.setItem("adonisStart", formatDate(startDate));
  const dayNum = Math.floor((selectedDate - startDate) / (1000 * 60 * 60 * 24));
  const phase = dayNum < 14 ? "Reset & Prime" : dayNum < 28 ? "Build & Harden" : dayNum < 42 ? "Sculpt & Optimize" : "Lock & Maintain";
  document.getElementById("phaseDisplay").textContent = phase;

  const schedule = {
    "Reset & Prime": "Hydration, protein-focused meals, bodyweight training.",
    "Build & Harden": "Caloric increase, strength training, mental focus.",
    "Sculpt & Optimize": "Low carb, fat burn circuits, peak definition.",
    "Lock & Maintain": "Sustain energy, hybrid routines, balance and reflect."
  };
  document.getElementById("scheduleBox").textContent = schedule[phase];

  const log = logs.find(e => e.date === dateStr) || {};
  ["weight","bodyFat","sleep","mood","energy","focus","libido","cravings","smoked","masturbated","compliance","notes"].forEach(id => {
    if (document.getElementById(id).tagName === "SELECT") {
      document.getElementById(id).value = log[id] || "Yes";
    } else {
      document.getElementById(id).value = log[id] || "";
    }
  });

  updateCharts();
}

function saveEntry() {
  const dateStr = formatDate(selectedDate);
  const entry = {
    date: dateStr,
    weight: document.getElementById("weight").value,
    bodyFat: document.getElementById("bodyFat").value,
    sleep: document.getElementById("sleep").value,
    mood: document.getElementById("mood").value,
    energy: document.getElementById("energy").value,
    focus: document.getElementById("focus").value,
    libido: document.getElementById("libido").value,
    cravings: document.getElementById("cravings").value,
    smoked: document.getElementById("smoked").value,
    masturbated: document.getElementById("masturbated").value,
    compliance: document.getElementById("compliance").value,
    notes: document.getElementById("notes").value
  };
  const idx = logs.findIndex(e => e.date === dateStr);
  if (idx >= 0) logs[idx] = entry;
  else logs.push(entry);
  localStorage.setItem("adonisLogs", JSON.stringify(logs));
  alert("Entry saved!");
  updateCharts();
}

function changeDay(offset) {
  selectedDate.setDate(selectedDate.getDate() + offset);
  updateHeader();
}

function updateCharts() {
  const ctx = document.getElementById("weightChart").getContext("2d");
  const labels = logs.map(e => e.date);
  const data = logs.map(e => +e.weight);
  if (window.weightChart) window.weightChart.destroy();
  window.weightChart = new Chart(ctx, {
    type: "line",
    data: {
      labels: labels,
      datasets: [{
        label: "Weight (kg)",
        data: data,
        borderColor: "#3b82f6",
        fill: false
      }]
    }
  });
}

updateHeader();
</script>
</body>
</html>
